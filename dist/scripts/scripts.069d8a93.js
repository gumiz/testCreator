"use strict";angular.module("jsTestCreatorApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngDialog"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("jsTestCreatorApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jsTestCreatorApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jsTestCreatorApp").controller("fileServiceCtrl",["$scope","arrayRandomizer","fileLoaderService","scoreCounterService","dialogService",function(a,b,c,d,e){function f(b){var c=b.target.result;a.data.questions=c.split("#"),a.data.generate(),a.$apply()}function g(){a.data.questions=b.shuffleArray(a.data.questions)}function h(){a.numberOfQuestionsToGenerate=Math.min(a.data.questions.length,a.data.number)}function i(){for(var b=1,c=0;c<a.numberOfQuestionsToGenerate;c++)if(""!=a.data.questions[c]){for(var d=a.data.questions[c].split("\n"),e={question:d[0],answers:[]},f=1;f<d.length;f++){var g=d[f];if(""!=g.trim()){var h={id:b++,answer:g.substr(1).trim(),shouldBeChecked:"1"==g.substring(0,1)};e.answers.push(h)}}a.data.randomQuestions.push(e)}}function j(){a.data.questions=_.filter(a.data.questions,function(a){return""!=a})}function k(){a.data={},a.data.number=10,a.numberOfQuestionsToGenerate=0,a.data.questions=void 0,a.data.randomQuestions=[{question:"1. Pytanie testowe?",answers:[{id:1,answer:"odpowiedź błędna",shouldBeChecked:0},{id:2,answer:"odpowiedź prawidłowa",shouldBeChecked:1},{id:3,answer:"odpowiedź błędna",shouldBeChecked:0}]}],a.data.providedAnswers={}}k(),a.data.fileChanged=c.getLoadFileFunction(f),a.data.generate=function(){return a.data.providedAnswers={},void 0==a.data.questions?void e.showMessage("Brak danych"):(j(),g(),h(),a.data.randomQuestions=[],void i())},a.data.getScore=function(){d.getScore(a.data.randomQuestions,a.data.providedAnswers)},document.getElementById("fileinput").addEventListener("change",a.data.fileChanged,!1)}]),angular.module("jsTestCreatorApp").service("arrayRandomizer",function(){function a(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}return{shuffleArray:a}}),angular.module("jsTestCreatorApp").service("fileLoaderService",function(){function a(a){return function(b){var c=b.target.files[0];if(c){var d=new FileReader;d.onload=function(b){a(b)},d.readAsText(c)}else alert("Nieudana próba wczytania pliku")}}return{getLoadFileFunction:a}}),angular.module("jsTestCreatorApp").service("resultPresenterService",["dialogService",function(a){function b(b){var c=Math.round(b.good/b.all*100);a.showMessage("Score: "+b.good+" / "+b.all+"\n\nPercent: "+c+"%")}return{showResult:b}}]),angular.module("jsTestCreatorApp").service("scoreCounterService",["resultPresenterService",function(a){function b(b,e){d=e;for(var f={good:0,all:0},g=0;g<b.length;g++){for(var h=b[g],i=0,j=0;j<h.answers.length;j++){var k=h.answers[j];c(k)&&i++}h.answers.length==i&&f.good++,f.all++}a.showResult(f)}function c(a){var b=a.shouldBeChecked==d[a.id]||0==a.shouldBeChecked&&void 0==d[a.id];return a.isIncorrect=!b,b}var d={};return{getScore:b}}]),angular.module("jsTestCreatorApp").service("dialogService",["ngDialog",function(a){var b=function(b){a.openConfirm({template:"<p>"+b+'</p>                <div class="ngdialog-buttons">                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm(1)">OK</button>                </div>',plain:!0})},c=function(b,c){a.openConfirm({template:"<p>"+b+'</p>                <div class="ngdialog-buttons">                    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">Nie</button>                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm(1)">Tak</button>                </div>',plain:!0}).then(function(a){c()},function(a){})},d=function(b,c){a.openConfirm({template:b,scope:c})},e=function(){a.close()};return{showMessage:b,confirmation:c,showDialog:d,closeDialog:e}}]);